<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ZNC: CGetAddrInfo Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ZNC
   &#160;<span id="projectnumber">trunk</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">CGetAddrInfo Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="CGetAddrInfo" -->
<p>this function is a wrapper around getaddrinfo (for ipv6)  
 <a href="classCGetAddrInfo.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="Csocket_8h_source.html">Csocket.h</a>&gt;</code></p>

<p><a href="classCGetAddrInfo-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCGetAddrInfo.html#a88796e7dbb9c7fb21f652351ac920ecb">CGetAddrInfo</a> (const <a class="el" href="defines_8h.html#a6692c05392220a687252ecd5dacf78ad">CS_STRING</a> &amp;sHostname, <a class="el" href="classCsock.html">Csock</a> *pSock, <a class="el" href="classCSSockAddr.html">CSSockAddr</a> &amp;csSockAddr)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">ctor  <a href="#a88796e7dbb9c7fb21f652351ac920ecb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCGetAddrInfo.html#af12fbc77cedbf0d538e13c5107755249">~CGetAddrInfo</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCGetAddrInfo.html#aac031f503d2e201468a9984a370483a1">Init</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">simply sets up m_cHints for use in process  <a href="#aac031f503d2e201468a9984a370483a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCGetAddrInfo.html#a315c0fc484347988f22fd4ed42499db6">Process</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">the simplest part of the function, only calls getaddrinfo and uses only m_sHostname, m_pAddrRes, and m_cHints.  <a href="#a315c0fc484347988f22fd4ed42499db6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCGetAddrInfo.html#aa966eeec4d0b1643e8cdbae65ab9076d">Finish</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">finalizes and sets up csSockAddr (and pSock if not NULL), only needs to be called if Process returns 0, but can be called anyways if flow demands it  <a href="#aa966eeec4d0b1643e8cdbae65ab9076d"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>this function is a wrapper around getaddrinfo (for ipv6) </p>
<p>in the event this code is using ipv6, it calls getaddrinfo, and it tries to start the connection on each iteration in the linked list returned by getaddrinfo. if pSock is not NULL the following behavior happens.</p>
<ul>
<li>if pSock is a listener, or if the connect state is in a bind vhost state (to be used with bind) AI_PASSIVE is sent to getaddrinfo</li>
<li>if pSock is an outbound connection, AI_ADDRCONFIG and the connection is started from within this function. getaddrinfo might return multiple (possibly invalid depending on system configuration) ip addresses, so connect needs to try them all. A classic example of this is a hostname that resolves to both ipv4 and ipv6 ip's. You still need to call Connect (and ConnectSSL) to finish up the connection state</li>
</ul>
<p>Process can be called in a thread, but Init and Finish must only be called from the parent once the thread is complete </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a88796e7dbb9c7fb21f652351ac920ecb"></a><!-- doxytag: member="CGetAddrInfo::CGetAddrInfo" ref="a88796e7dbb9c7fb21f652351ac920ecb" args="(const CS_STRING &amp;sHostname, Csock *pSock, CSSockAddr &amp;csSockAddr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCGetAddrInfo.html#a88796e7dbb9c7fb21f652351ac920ecb">CGetAddrInfo::CGetAddrInfo</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="defines_8h.html#a6692c05392220a687252ecd5dacf78ad">CS_STRING</a> &amp;&#160;</td>
          <td class="paramname"><em>sHostname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCsock.html">Csock</a> *&#160;</td>
          <td class="paramname"><em>pSock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCSSockAddr.html">CSSockAddr</a> &amp;&#160;</td>
          <td class="paramname"><em>csSockAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ctor </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">sHostname</td><td>the host to resolve </td></tr>
    <tr><td class="paramname">pSock</td><td>the sock being setup, this option can be NULL, if it is null csSockAddr is only setup </td></tr>
    <tr><td class="paramname">csSockAddr</td><td>the struct that sockaddr data is being copied to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af12fbc77cedbf0d538e13c5107755249"></a><!-- doxytag: member="CGetAddrInfo::~CGetAddrInfo" ref="af12fbc77cedbf0d538e13c5107755249" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCGetAddrInfo.html#af12fbc77cedbf0d538e13c5107755249">CGetAddrInfo::~CGetAddrInfo</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa966eeec4d0b1643e8cdbae65ab9076d"></a><!-- doxytag: member="CGetAddrInfo::Finish" ref="aa966eeec4d0b1643e8cdbae65ab9076d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classCGetAddrInfo.html#aa966eeec4d0b1643e8cdbae65ab9076d">CGetAddrInfo::Finish</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>finalizes and sets up csSockAddr (and pSock if not NULL), only needs to be called if Process returns 0, but can be called anyways if flow demands it </p>

</div>
</div>
<a class="anchor" id="aac031f503d2e201468a9984a370483a1"></a><!-- doxytag: member="CGetAddrInfo::Init" ref="aac031f503d2e201468a9984a370483a1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classCGetAddrInfo.html#aac031f503d2e201468a9984a370483a1">CGetAddrInfo::Init</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>simply sets up m_cHints for use in process </p>

</div>
</div>
<a class="anchor" id="a315c0fc484347988f22fd4ed42499db6"></a><!-- doxytag: member="CGetAddrInfo::Process" ref="a315c0fc484347988f22fd4ed42499db6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classCGetAddrInfo.html#a315c0fc484347988f22fd4ed42499db6">CGetAddrInfo::Process</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>the simplest part of the function, only calls getaddrinfo and uses only m_sHostname, m_pAddrRes, and m_cHints. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Csocket_8h_source.html">Csocket.h</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 8 2014 15:18:30 for ZNC by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
